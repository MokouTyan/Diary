【2023.02.01】在PVE上安装MacOS 13 Ventura

本文参考链接：[Installing macOS 13 Ventura on Proxmox 7.2 – Nicholas Sherlock](https://www.nicksherlock.com/2022/10/installing-macos-13-ventura-on-proxmox/)

本次平台是i9 9980hk，CPU尽量新一点应该都可以

### 创建LXC

![image-20230201164747955](https://i0.hdslb.com/bfs/new_dyn/10fcddc5ea413512f573eb4535a92e3a1865692.png)

![image-20230201164912669](https://i0.hdslb.com/bfs/new_dyn/41a413a51163aac6273f22edf46c905f1865692.png)

![image-20230201164937824](https://i0.hdslb.com/bfs/new_dyn/782c53c65ca946afdcf3c7ebeb2a386a1865692.png)

![image-20230201164953037](https://i0.hdslb.com/bfs/new_dyn/a05730a1e4035a93d27a5321ae5754dd1865692.png)

![image-20230201165014247](https://i0.hdslb.com/bfs/new_dyn/30e3ad06237a37dbff996760da6a9ddd1865692.png)

![image-20230201165030890](https://i0.hdslb.com/bfs/new_dyn/f20f6728ec2142d42f7f2b420f4c538f1865692.png)

剩下默认

### 启动虚拟机并且下载

```
sudo sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list
apt update
apt upgrade -y
sudo apt-get install qemu uml-utilities virt-manager git \
    wget libguestfs-tools p7zip-full make dmg2img -y
# 下载
cd ~
git clone --depth 1 --recursive https://github.com/kholia/OSX-KVM.git
cd OSX-KVM
#下载ISO
./fetch-macOS-v2.py
#转换为ISO
dmg2img -i BaseSystem.dmg BaseSystem.img
```

![image-20230201165847497](https://i0.hdslb.com/bfs/new_dyn/93467366b69c2c52cf266067d9ff4ef71865692.png)

![image-20230201170050831](https://i0.hdslb.com/bfs/new_dyn/d99b1ae6a0b082212b98d3a3d5e52ac51865692.png)

传输到本机PVE中

先看看LXC的路径

```
pwd
#/root/OSX-KVM
```

105自己改一下

```
pct pull 105 /root/OSX-KVM/BaseSystem.img /var/lib/vz/template/iso/MacOS13.img
```

就可以看到了

![image-20230201170502317](https://i0.hdslb.com/bfs/new_dyn/a8effbf1cb92e27c19d8ad9661f7f42c1865692.png)

#### 下载OpenCore

```
cd /var/lib/vz/template/iso/
wget https://github.com/thenickdude/KVM-Opencore/releases/download/v19/OpenCore-v19.iso.gz
gzip -d OpenCore-v19.iso.gz
```

删掉这台下载用的虚拟机

### 创建Mac虚拟机

![image-20230201170609923](https://i0.hdslb.com/bfs/new_dyn/30d614b6d4722ad37016395db3d19e931865692.png)

![image-20230201173018775](https://i0.hdslb.com/bfs/new_dyn/88e5c3bb52585467e748e9a86900319f1865692.png)

![image-20230201173101298](https://i0.hdslb.com/bfs/new_dyn/b4995a36d10cc06088802e8d9a0597be1865692.png)

![image-20230201173154324](https://i0.hdslb.com/bfs/new_dyn/e991c6adeb6dda78ad3522dd676834f21865692.png)

![image-20230201173340704](https://i0.hdslb.com/bfs/new_dyn/f3c38926f7c81e4c23e5dac9971c62eb1865692.png)

![image-20230201173410601](https://i0.hdslb.com/bfs/new_dyn/5704ad4e510ca57fd7cf5156e9b2fcc81865692.png)

![image-20230201173428288](https://i0.hdslb.com/bfs/new_dyn/7fe5cff9e555f237db4c82e9f7c4803d1865692.png)

